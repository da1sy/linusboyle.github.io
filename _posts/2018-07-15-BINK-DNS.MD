---
title: CentOS6.5 DNS服务器搭建
date: 2018-07-15
tags: Linux
layout: post
---


1.安装bind
--------

--------

```shell
yum install -y bind
```

2.修改`named.conf`主配置文件
---------------------

```shell
vim /etc/named.conf
```

图中圈中的地方改为any
![修改后的结果](https://img-blog.csdn.net/20180715165153294?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhMXN5ZGExc3k=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

3.配置正向、反向解析
-----------

```shell
vim /etc/named.rfc1912.zones
```
添加以下两条
![这里写图片描述](https://img-blog.csdn.net/20180715165647111?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhMXN5ZGExc3k=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
正向解析格式为：

```
zone "域名" IN {
        type master;
        file "z";    //正向解析的文件名要与下面创建的文件名对应
};
```
反向解析格式：
```
zone "0.16.172.in-addr.arpa" IN {  //前面为服务器IP地址的反写后面加上".in-addr.arpa"
        type master;
        file "f";    //反向解析的文件名要与下面创建的文件名对应
};
```

4.创建解析文件
--------

在`/var/named/`下创建文件  **z**
编辑文件为

```
$TTL 1D
@       IN SOA  @ rname.invalid. (
                                        0       ; serial
                                        1D      ; refresh
                                        1H      ; retry
                                        1W      ; expire
                                        3H )    ; minimum
        NS      @
        A       172.16.0.100
www     A       172.16.0.100

```
再创建文件**f**
编辑为

```
$TTL 1D
@       IN SOA  @ rname.invalid. (
                                        0       ; serial
                                        1D      ; refresh
                                        1H      ; retry
                                        1W      ; expire
                                        3H )    ; minimum
        NS      @
        A       172.16.0.100
100     PTR     www.da1sy.com.


```

5.更改主机地址和名称
-----------

```
vim /etc/resolv.conf
```
![这里写图片描述](https://img-blog.csdn.net/20180715194330723?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhMXN5ZGExc3k=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

最后nslookup一下，域名和IP都没问题，大功告成 ^.^
![这里写图片描述](https://img-blog.csdn.net/20180715200206157?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhMXN5ZGExc3k=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

如果发现解析不到的情况，可能是没有文件没有权限，可以chmod 777
